<div class="cnt">
  <form class="form" [formGroup]="myForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <h1>Saisi de nouvelle offre</h1>
    </div>
    <div class="form-group">
      <label>Date début de l'offre:</label>
      <input class="input" [formControl]="myForm.controls['date']" type="date" />
    </div>
    <div class="form-group">
      <label>Code de l'offre:</label>
      <input class="input" [formControl]="myForm.controls['code']" type="text" />
    </div>
    <div class="form-group">
      <label>Nom Offre:</label>
      <input class="input" [formControl]="myForm.controls['name']" type="text" />
    </div>
    <div>
      <div class="form-group">
        <label>Heure début :</label>
        <input  [formControl]="myForm.controls['hourMin']" class="input" type="text" name="hourMin" />
      </div>
      <div class="form-group">
        <label>Heure fin :</label>
        <input [formControl]="myForm.controls['hourMax']" class="input" type="text" name="hourMax" />
      </div>
    </div>
    <div class="form-group">
      <label>Durée de validité (en Jours):</label>
      <input class="input" [formControl]="myForm.controls['validityDay']" type="text" />
    </div>
    <div class="form-group">
      <label>Limite Achat par période:</label>
      <input class="input" [formControl]="myForm.controls['buyingLimit']" type="number" />
    </div>
    <div class="form-group">
      <label>Période de limite d'achat:</label>
      <input class="input" [formControl]="myForm.controls['durationInDays']" type="number" />
    </div>
    <div class="form-group">
      <label>Prix:</label>
      <input class="input" [formControl]="myForm.controls['price']" type="number" />
    </div>
    <div class="form-group">
      <label>isOneDay:</label>
      <input type="checkbox" [formControl]="myForm.controls['isOneDay']"/>
    </div>
  </form>

  <form class="form" [formGroup]="amountForm" (ngSubmit)="onAmountsSub()">
    <div class="form-group">
      <h1>Montants</h1>
    </div>
    <div class="form-group">
      <label>Types d'offre:</label>
      <select
        type="text"
        name="applicationName"
        class="input select"
        [formControl]="amountForm.controls['appName']"
        (ngModelChange)="ato(amountForm.controls['appName'].value)"
      >
        <option *ngFor="let app of applications" value="{{app.name}}">
          {{app.name}}
        </option>
      </select>
    </div>
    <div class="form-group">
      <label>est illimité</label>
      <input (ngModelChange)="toggleIsLimitted()" [formControl]="amountForm.controls['isIllimited']" type="checkbox" name="isIllimited" value="false" />
    </div>

    <div *ngIf="!isUnlimited"> 
      <div class="form-group">
        <label>Valeur:</label>
        <input
          type="number"
          name="value"
          placeholder="Valeur"
          class="input"
          [formControl]="amountForm.controls['value']"
        />
      </div>
      <div class="form-group">
        <label>Unité :</label>
        <select [formControl]="amountForm.controls['unitName']" class="input select">
          <option value="Sec">Sec</option>
          <option value="Mn">Mn</option>
          <option value="Hr">Hr</option>
          <option value="Ar">Ar</option>
          <option value="N">N</option>
          <option value="Ko">Ko</option>
          <option value="Mo">Mo</option>
          <option value="Go">Go</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Prix intra opérateur:</label>
        <input
          type="number"
          name="intra"
          placeholder="Prix intra"
          class="input"
          [formControl]="amountForm.controls['intra']"
        />
      </div>
      <div class="form-group">
        <label>Prix extra opérateur:</label>
        <input
          type="number"
          name="extra"
          placeholder="Prix extra"
          class="input"
          [formControl]="amountForm.controls['extra']"
        />
      </div>
    </div>
    
    <div class="form-group">
      <button class="btn btn-lg btn-primary sub">Ajouter</button>
    </div>
    <div class="form-group">
      <app-amount-list (onDelete)="remove($event)"  [amounts]="addedAmounts"></app-amount-list>
    </div>
  </form>
</div>
<!-- tapitra -->
<div class="form-group">
  <button (click)="onSubmit()" type="submit" class="btn btn-lg btn-primary sub">
    Valider
  </button>
</div>
<app-toast #toast></app-toast>
